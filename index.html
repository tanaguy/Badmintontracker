<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#3B82F6">
    <title>Badminton Tracker</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.svg">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main App Container -->
    <div id="app" class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1>ğŸ¸ Badminton Tracker</h1>
        </header>

        <!-- Tab Navigation -->
        <nav class="tab-nav">
            <button class="tab-btn active" data-tab="session">
                <span class="tab-icon">â–¶ï¸</span>
                <span>Session</span>
            </button>
            <button class="tab-btn" data-tab="players">
                <span class="tab-icon">ğŸ‘¥</span>
                <span>Players</span>
            </button>
            <button class="tab-btn" data-tab="rankings">
                <span class="tab-icon">ğŸ“Š</span>
                <span>Rankings</span>
            </button>
            <button class="tab-btn" data-tab="history">
                <span class="tab-icon">ğŸ•</span>
                <span>History</span>
            </button>
        </nav>

        <!-- Tab Content -->
        <main class="tab-content">
            <!-- Session Tab -->
            <div id="session-tab" class="tab-pane active">
                <div id="no-session-view" class="empty-state">
                    <div class="empty-icon">ğŸ¸</div>
                    <h2>No Active Session</h2>
                    <p>Start a new session to begin tracking matches</p>
                    <button class="btn btn-primary" onclick="showStartSession()">Start New Session</button>
                </div>

                <div id="active-session-view" class="hidden">
                    <div class="session-header">
                        <div class="session-info">
                            <h2 id="session-name">Session Name</h2>
                            <p id="session-player-count">0 Players</p>
                        </div>
                        <button class="btn btn-danger" onclick="endSession()">End Session</button>
                    </div>

                    <button class="btn btn-success btn-large" onclick="showMatchGenerator()">
                        â• Generate Matches
                    </button>

                    <div id="match-queue" class="match-queue">
                        <div class="empty-state-small">
                            <p>No matches in queue</p>
                            <p class="text-muted">Tap 'Generate Matches' to create matches</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Players Tab -->
            <div id="players-tab" class="tab-pane">
                <div class="tab-header">
                    <h2>Players</h2>
                    <button class="btn btn-primary btn-sm" onclick="showAddPlayer()">â• Add</button>
                </div>
                <div id="players-list" class="list-container">
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ‘¥</div>
                        <h3>No Players</h3>
                        <p>Add players to start tracking matches</p>
                    </div>
                </div>
            </div>

            <!-- Rankings Tab -->
            <div id="rankings-tab" class="tab-pane">
                <div class="tab-header">
                    <h2>Rankings</h2>
                    <div class="segmented-control">
                        <button class="seg-btn active" data-view="overall" onclick="switchRankingView('overall')">Overall</button>
                        <button class="seg-btn" data-view="session" onclick="switchRankingView('session')">Session</button>
                    </div>
                </div>
                <div id="rankings-list" class="list-container">
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ“Š</div>
                        <h3>No Rankings Yet</h3>
                        <p>Play some matches to see rankings</p>
                    </div>
                </div>
            </div>

            <!-- History Tab -->
            <div id="history-tab" class="tab-pane">
                <div class="tab-header">
                    <h2>History</h2>
                    <div class="segmented-control">
                        <button class="seg-btn active" data-view="sessions" onclick="switchHistoryView('sessions')">Sessions</button>
                        <button class="seg-btn" data-view="matches" onclick="switchHistoryView('matches')">Matches</button>
                    </div>
                </div>
                <div id="history-list" class="list-container">
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ•</div>
                        <h3>No History Yet</h3>
                        <p>Start playing to see history</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="modal-overlay" class="modal-overlay hidden" onclick="closeModal()"></div>

    <!-- Start Session Modal -->
    <div id="start-session-modal" class="modal hidden">
        <div class="modal-header">
            <h2>New Session</h2>
            <button class="close-btn" onclick="closeModal()">âœ•</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>Session Name</label>
                <input type="text" id="new-session-name" class="input" placeholder="e.g., Monday Night Game">
            </div>
            <div class="form-group">
                <label>Select Players (<span id="selected-count">0</span> selected)</label>
                <div id="session-player-list" class="player-select-list"></div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            <button class="btn btn-primary" onclick="startSession()">Start Session</button>
        </div>
    </div>

    <!-- Add/Edit Player Modal -->
    <div id="player-modal" class="modal hidden">
        <div class="modal-header">
            <h2 id="player-modal-title">Add Player</h2>
            <button class="close-btn" onclick="closeModal()">âœ•</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>Avatar</label>
                <div class="avatar-picker">
                    <div id="player-avatar-preview" class="avatar-large" onclick="document.getElementById('avatar-input').click()">
                        <span class="avatar-placeholder">ğŸ“·</span>
                    </div>
                    <input type="file" id="avatar-input" accept="image/*" class="hidden" onchange="handleAvatarSelect(event)">
                </div>
            </div>
            <div class="form-group">
                <label>Player Name</label>
                <input type="text" id="player-name" class="input" placeholder="Enter name">
            </div>
            <div class="form-group">
                <label>Skill Level</label>
                <div class="skill-selector">
                    <button class="skill-btn" data-level="1" onclick="selectSkill(1)">Beginner</button>
                    <button class="skill-btn" data-level="2" onclick="selectSkill(2)">Casual</button>
                    <button class="skill-btn active" data-level="3" onclick="selectSkill(3)">Average</button>
                    <button class="skill-btn" data-level="4" onclick="selectSkill(4)">Advanced</button>
                    <button class="skill-btn" data-level="5" onclick="selectSkill(5)">Expert</button>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            <button class="btn btn-primary" onclick="savePlayer()">Save</button>
        </div>
    </div>

    <!-- Match Generator Modal -->
    <div id="match-generator-modal" class="modal hidden">
        <div class="modal-header">
            <h2>Generate Matches</h2>
            <button class="close-btn" onclick="closeModal()">âœ•</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>Match Type</label>
                <div class="segmented-control">
                    <button class="seg-btn active" data-type="singles" onclick="selectMatchType('singles')">Singles</button>
                    <button class="seg-btn" data-type="doubles" onclick="selectMatchType('doubles')">Doubles</button>
                </div>
            </div>
            <div class="form-group">
                <label>Number of Matches</label>
                <div class="stepper">
                    <button class="stepper-btn" onclick="adjustMatchCount(-1)">âˆ’</button>
                    <span id="match-count">1</span>
                    <button class="stepper-btn" onclick="adjustMatchCount(1)">+</button>
                </div>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="skill-matching" class="checkbox">
                    Use Skill-Based Matching
                </label>
                <p class="help-text">Match players with similar skill levels</p>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            <button class="btn btn-success" onclick="generateMatches()">Generate</button>
        </div>
    </div>

    <!-- Record Match Modal -->
    <div id="record-match-modal" class="modal hidden">
        <div class="modal-header">
            <h2>Record Match</h2>
            <button class="close-btn" onclick="closeModal()">âœ•</button>
        </div>
        <div class="modal-body">
            <div id="match-details" class="match-record-view"></div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="add-scores" class="checkbox" onchange="toggleScoreEntry()">
                    Add Scores
                </label>
            </div>
            <div id="score-entry" class="score-entry hidden">
                <div class="score-input-row">
                    <div class="score-input-group">
                        <label>Team 1 Score</label>
                        <input type="number" id="team1-score" class="input text-center" placeholder="21">
                    </div>
                    <span class="score-separator">âˆ’</span>
                    <div class="score-input-group">
                        <label>Team 2 Score</label>
                        <input type="number" id="team2-score" class="input text-center" placeholder="19">
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-danger" onclick="skipMatch()">Skip</button>
            <button class="btn btn-success" onclick="recordMatch()">Record</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
